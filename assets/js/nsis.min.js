function docsPage(){transformPage(),searchText=$("#search-input").val(),window.location.href="/Documentation/Reference/"+searchText+".html"}function duckDuckGo(){transformPage(),searchText=$("#search-input").val(),injectFrame("https://duckduckgo.com/?sites=https://nsis.sourceforge.io&ka=h&k7=%23f5f4f3&kj=%236f6171&ky=%23ffffff&kx=b&kt=Segoe+UI&q="+searchText)}function injectFrame(t){$("#content").replaceWith('<div id="content" style="position:absolute"><iframe width="100%" height="100%" frameBorder="0" src="'+t+'"></iframe></div>')}function transformPage(){$(".ui-autocomplete").css({display:"none"}),$("#nsis-navbar-collapse").removeClass("in"),$("body").css({overflow:"hidden"})}function inArrayS(t,e){var o=-1;return $.each(e,function(e,a){-1==o&&a.label.toLowerCase()==t.toLowerCase()&&(o=e)}),o}var debug=!0;$.urlParam=function(t){var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.href);if(e)return e[1]||0};var useStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},time=Date.now||function(){return+new Date},getBookmarks=function(){var t=[];return null!==localStorage.getItem("bookmarks")&&(debug&&console.log("Loading bookmarks from locationStorage"),t=JSON.parse(localStorage.getItem("bookmarks"))),t};$.widget("custom.hint",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(t,e){var o=this,a="";$.each(e,function(e,n){var s;n.category!=a&&(t.append("<li class='ui-autocomplete-category'>"+n.category+"</li>"),a=n.category),s=o._renderItemData(t,n),n.category&&s.attr("aria-label",n.category+" : "+n.label)})}}),$(function(){function t(){switch(location.hash){case"#forum":case"#forums":url="http://forums.winamp.com/forumdisplay.php?forumid=65";break;case"#wiki":url="http://nsis.sourceforge.net";break;default:return!1}transformPage(),injectFrame(url)}hash=window.location.hash,""!==hash&&t(),window.onhashchange=t});var m,Modal={init:function(){this.events()},events:function(){},header:function(t,e){var o='<div class="'+t+' modal fade" tabindex="-1" role="dialog">';return o+='\n  <div class="modal-dialog">',o+='\n    <div class="modal-content">',o+='\n      <div class="modal-header">',o+='\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',o+='\n        <h4 class="modal-title">'+e+"</h4>",o+="\n      </div>",o+='\n      <div class="modal-body">'},footer:function(t){var e="\n      </div>";return e+='\n      <div class="modal-footer">',e+='\n        <button type="button" class="btn btn-default" data-dismiss="modal">'+t+"</button>",e+="\n      </div>",e+="\n    </div>",e+="\n  </div>",e+="\n</div>"}},debug=!0,b,Bookmarks={config:{saveButton:$(".save-bookmark"),sortButton:$(".sort-bookmark"),manageButton:$(".manage-bookmarks"),deleteButton:$(".delete-bookmark")},init:function(){b=this.config,this.events(),this.populate()},events:function(){b.saveButton.click(function(t){Bookmarks.save()}),b.sortButton.click(function(t){Bookmarks.sort()}),b.manageButton.click(function(t){Bookmarks.manage()}),$("body").on("click",".delete-bookmark",function(t){Bookmarks.delete($(this))})},populate:function(){var t=this.getItem();if(t.length>0){$("#bookmarks-menu").removeClass("hidden");var e="";t.forEach(function(t){void 0!==t&&null!==t&&(e+='\n<li><a href="'+t.url+'" rel="bookmark">'+t.name+"</a></li>")}),$("#bookmarks-menu ul .divider").nextAll().remove(),$("#bookmarks-menu ul").append(e)}else $(".bookmark-manager").modal("hide"),$("#bookmarks-menu").addClass("hidden")},manage:function(){event.preventDefault(),debug&&console.log("Launching bookmark manager"),$(".modal").remove();var t=this.getItem();modal=Modal.header("bookmark-manager","Bookmark Manager"),modal+='\n        <div class="table-responsive">',modal+='\n          <table class="table table-hover table-striped">',modal+="\n            <tbody>",t.forEach(function(t){void 0!==t&&(modal+="\n                <tr>",modal+="\n                  <td>"+t.name+'<br><a href="'+t.url+'" class="text-muted small bookmark-url">'+t.url+"</a></td>",modal+='\n                  <td class="text-right"><button type=button class="btn btn-sm btn-danger delete-bookmark"">Remove</button></td>',modal+="\n                </tr>")}),modal+="\n            </tbody>",modal+="\n          </table>",modal+="\n        </div>",modal+=Modal.footer("Close"),$("body").append(modal),$(".bookmark-manager").modal("show")},sort:function(){event.preventDefault();var t=this.getItem();debug&&console.log("Sorting bookmarks"),t.sort(byKey("name")),this.setItem(t),this.populate()},delete:function(t){event.preventDefault(),debug&&console.log("Delete bookmark");var e=t.parent("td").prev("td").children(".bookmark-url").text();t.closest("tr").hide();var o=getBookmarks();if(o.length>0)for(var a=o.length-1;a>=0;a--)o[a].url===e&&(debug&&console.log("Deleting bookmark"),o.splice(a,1));this.setItem(o),this.populate()},save:function(){event.preventDefault();var t=this.getItem(),e=document.title,o=" | Nullsoft Scriptable Install System";e.endsWith(o)&&(e=e.slice(0,-o.length));var a=window.location.href,n=!1;t.length>0&&t.forEach(function(t){t.url===a&&(n=!0)}),!0===n?debug&&console.log("Duplicate link, skipping "+a):(console.log("Saving bookmark "+a),t.push({name:e,url:a}),this.setItem(t),$("#bookmarks-menu ul").append('\n<li><a href="'+a+'" rel="bookmark">'+e+"</a></li>"),$("#bookmarks-menu").removeClass("hidden"))},getItem:function(){var t=[];return null!==localStorage.getItem("bookmarks")&&(debug&&console.log("Loading bookmarks from locationStorage"),t=JSON.parse(localStorage.getItem("bookmarks"))),t},setItem:function(t){debug&&console.log("Saving bookmarks to locationStorage"),localStorage.setItem("bookmarks",JSON.stringify(t))}},p,Preferences={config:{setupButton:$(".setup-page"),switchButton:$(".set-highlighter"),customTheme:$(".custom-theme")},init:function(){p=this.config,this.events()},events:function(){p.setupButton.click(function(t){Preferences.show()}),$("body").on("click",".set-highlighter",function(t){Preferences.switch()})},show:function(){event.preventDefault(),this.modal()},switch:function(){debug&&console.log("Switching theme"),$(".set-highlighter").removeClass("active"),p.customTheme.addClass("hidden"),$(event.target).addClass("active");var t=$(event.target).text().toLowerCase();"dark"!==t&&"light"!==t||($("body").removeClass("hljs-dark hljs-light").addClass("hljs-"+t),$(".hljs-theme").attr("href",window.location.host+"/assets/css/highlight.min.css"),localStorage.setItem("hljs-theme",t)),debug&&console.log("Highlighter is set to "+t)},modal:function(){debug&&console.log("Showing page settings"),$(".modal").remove();var t="",e="",o=" hidden",a=localStorage.getItem("hljs-theme");console.log("Selected theme: "+a),"dark"===a?t=" active":"light"===a?e=" active":o=" active",modal=Modal.header("page-settings","Page Settings"),modal+="<p>Highlighter theme:</p>",modal+='<div class="btn-group switch" role="group">',modal+='  <button type="button" class="btn btn-switch set-highlighter'+t+'">Dark</button>',modal+='  <button type="button" class="btn btn-switch set-highlighter'+e+'">Light</button>',modal+='  <button type="button" class="btn btn-switch custom-theme'+o+'">Custom</button>',modal+="</div>",modal+=Modal.footer("Close"),$("body").append(modal),$(".page-settings").modal("show")}},k,Keyboard={config:{input:$("#search-input")},init:function(){m=this.config,this.events()},events:function(){$(document).bind("keyup",function(t){Keyboard.focus()})},focus:function(){70===event.which&&(debug&&console.log("Focusing search"),$("#search-input").focus())}},h,Highlight={config:{custom:null,code:$("pre code"),theme:$(".hljs-theme"),body:$("body")},init:function(){h=this.config,this.default(),this.apply()},default:function(){if(!localStorage.getItem("hljs-theme")){localStorage.setItem("hljs-theme","dark")}},apply:function(){h.custom=localStorage.getItem("hljs-theme")||"dark","dark"===h.custom||"light"===h.custom?(debug&&console.log("Default "+h.custom+" theme"),h.body.removeClass("hljs-dark hljs-light").addClass("hljs-"+h.custom)):(debug&&console.log("Custom theme from "+h.custom),h.theme.attr("href",h.custom)),h.code.each(function(t,e){hljs.highlightBlock(e)})}};$(function(){$(".to-instapaper").click(function(t){t.preventDefault(),debug&&console.log("Saving to Instapaper");var e=encodeURIComponent(document.title),o=window.location.href;window.open("http://www.instapaper.com/hello2?url="+o+"&title="+e)})}),$(function(){var t,e;if(void 0===o)var o=$("body").data("search");$.ajax(o,{dataType:"json",success:function(e){t=e}}).done(function(){void 0!==$.urlParam("s")&&injectFrame("https://duckduckgo.com/?sites=https://nsis.sourceforge.io&ka=h&k7=%23f5f4f3&kj=%236f6171&ky=%23ffffff&kx=b&kt=Segoe+UI&q="+(e=$.urlParam("s"))),$("#search-input").attr("placeholder","Search").removeAttr("disabled").focus(),$("#search-input").keydown(function(){var o=$("#search-form");e=$("#search-input").val(),$("#search-input>ul>li.ui-state-focus").removeClass("ui-state-focus"),$(".ui-menu-item").filter(function(){return $.text([this])===e}).addClass("ui-state-focus"),inArrayS(e,t)>-1?o.attr("action","javascript:docsPage()"):o.attr("action","javascript:duckDuckGo()")}),$("#search-form").submit(function(t){if(""===$.trim($("#search-input").val()))return!1}),$("#search-input").hint({delay:0,source:t}),$(".ui-autocomplete").css({padding:"0"})})}),$(function(){Bookmarks.init(),Modal.init(),Preferences.init(),Keyboard.init(),Highlight.init()});