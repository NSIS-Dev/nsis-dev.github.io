function docsPage(){transformPage(),searchText=$("#search-input").val(),window.location.href="/Documentation/Reference/"+searchText+".html"}function duckDuckGo(){transformPage(),searchText=$("#search-input").val(),injectFrame(searchText)}function injectFrame(e){$("#content").replaceWith('<div id="content" style="position:absolute"><iframe width="100%" height="100%" frameBorder="0" src="https://duckduckgo.com/?sites=nsis.sourceforge.net&ka=h&k7=%23f5f4f3&kj=%236f6171&ky=%23ffffff&kx=b&kt=Segoe+UI&q='+e+'"></iframe></div>')}function transformPage(){$(".ui-autocomplete").css({display:"none"}),$("#nsis-navbar-collapse").removeClass("in"),$("body").css({overflow:"hidden"})}function inArrayS(e,t){var o=-1;return $.each(t,function(t,a){-1==o&&a.label.toLowerCase()==e.toLowerCase()&&(o=t)}),o}var debug=!0;$.urlParam=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);if(t)return t[1]||0};var useStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},time=Date.now||function(){return+new Date},getBookmarks=function(){var e=[];return null!==localStorage.getItem("bookmarks")&&(debug&&console.log("Loading bookmarks from locationStorage"),e=JSON.parse(localStorage.getItem("bookmarks"))),e};$.widget("custom.hint",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(e,t){var o=this,a="";$.each(t,function(t,n){var s;n.category!=a&&(e.append("<li class='ui-autocomplete-category'>"+n.category+"</li>"),a=n.category),s=o._renderItemData(e,n),n.category&&s.attr("aria-label",n.category+" : "+n.label)})}}),$(function(){function e(){switch(location.hash){case"#forum":case"#forums":url="http://forums.winamp.com/forumdisplay.php?forumid=65";break;case"#wiki":url="http://nsis.sourceforge.net";break;default:return!1}transformPage(),injectFrame(url)}hash=window.location.hash,""!==hash&&e(),window.onhashchange=e});var m,Modal={init:function(){this.events()},events:function(){},header:function(e,t){var o='<div class="'+e+' modal fade" tabindex="-1" role="dialog">';return o+='\n  <div class="modal-dialog">',o+='\n    <div class="modal-content">',o+='\n      <div class="modal-header">',o+='\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',o+='\n        <h4 class="modal-title">'+t+"</h4>",o+="\n      </div>",o+='\n      <div class="modal-body">'},footer:function(e){var t="\n      </div>";return t+='\n      <div class="modal-footer">',t+='\n        <button type="button" class="btn btn-default" data-dismiss="modal">'+e+"</button>",t+="\n      </div>",t+="\n    </div>",t+="\n  </div>",t+="\n</div>"}},debug=!0,b,Bookmarks={config:{saveButton:$(".save-bookmark"),sortButton:$(".sort-bookmark"),manageButton:$(".manage-bookmarks"),deleteButton:$(".delete-bookmark")},init:function(){b=this.config,this.events(),this.populate()},events:function(){b.saveButton.click(function(e){Bookmarks.save()}),b.sortButton.click(function(e){Bookmarks.sort()}),b.manageButton.click(function(e){Bookmarks.manage()}),$("body").on("click",".delete-bookmark",function(e){Bookmarks.delete($(this))})},populate:function(){var e=this.getItem();if(e.length>0){$("#bookmarks-menu").removeClass("hidden");var t="";e.forEach(function(e){void 0!==e&&null!==e&&(t+='\n<li><a href="'+e.url+'" rel="bookmark">'+e.name+"</a></li>")}),$("#bookmarks-menu ul .divider").nextAll().remove(),$("#bookmarks-menu ul").append(t)}else $(".bookmark-manager").modal("hide"),$("#bookmarks-menu").addClass("hidden")},manage:function(){event.preventDefault(),debug&&console.log("Launching bookmark manager"),$(".modal").remove();var e=this.getItem();modal=Modal.header("bookmark-manager","Bookmark Manager"),modal+='\n        <div class="table-responsive">',modal+='\n          <table class="table table-hover table-striped">',modal+="\n            <tbody>",e.forEach(function(e){void 0!==e&&(modal+="\n                <tr>",modal+="\n                  <td>"+e.name+'<br><a href="'+e.url+'" class="text-muted small bookmark-url">'+e.url+"</a></td>",modal+='\n                  <td class="text-right"><button type=button class="btn btn-sm btn-danger delete-bookmark"">Remove</button></td>',modal+="\n                </tr>")}),modal+="\n            </tbody>",modal+="\n          </table>",modal+="\n        </div>",modal+=Modal.footer("Close"),$("body").append(modal),$(".bookmark-manager").modal("show")},sort:function(){event.preventDefault();var e=this.getItem();debug&&console.log("Sorting bookmarks"),e.sort(byKey("name")),this.setItem(e),this.populate()},delete:function(e){event.preventDefault(),debug&&console.log("Delete bookmark");var t=e.parent("td").prev("td").children(".bookmark-url").text();e.closest("tr").hide();var o=getBookmarks();if(o.length>0)for(var a=o.length-1;a>=0;a--)o[a].url===t&&(debug&&console.log("Deleting bookmark"),o.splice(a,1));this.setItem(o),this.populate()},save:function(){event.preventDefault();var e=this.getItem(),t=document.title,o=" | Nullsoft Scriptable Install System";t.endsWith(o)&&(t=t.slice(0,-o.length));var a=window.location.href,n=!1;e.length>0&&e.forEach(function(e){e.url===a&&(n=!0)}),!0===n?debug&&console.log("Duplicate link, skipping "+a):(console.log("Saving bookmark "+a),e.push({name:t,url:a}),this.setItem(e),$("#bookmarks-menu ul").append('\n<li><a href="'+a+'" rel="bookmark">'+t+"</a></li>"),$("#bookmarks-menu").removeClass("hidden"))},getItem:function(){var e=[];return null!==localStorage.getItem("bookmarks")&&(debug&&console.log("Loading bookmarks from locationStorage"),e=JSON.parse(localStorage.getItem("bookmarks"))),e},setItem:function(e){debug&&console.log("Saving bookmarks to locationStorage"),localStorage.setItem("bookmarks",JSON.stringify(e))}},p,Preferences={config:{setupButton:$(".setup-page"),switchButton:$(".set-highlighter"),customTheme:$(".custom-theme")},init:function(){p=this.config,this.events()},events:function(){p.setupButton.click(function(e){Preferences.show()}),$("body").on("click",".set-highlighter",function(e){Preferences.switch()})},show:function(){event.preventDefault(),this.modal()},switch:function(){debug&&console.log("Switching theme"),$(".set-highlighter").removeClass("active"),p.customTheme.addClass("hidden"),$(event.target).addClass("active");var e=$(event.target).text().toLowerCase();"dark"!==e&&"light"!==e||($("body").removeClass("hljs-dark hljs-light").addClass("hljs-"+e),$(".hljs-theme").attr("href",window.location.host+"/assets/css/highlight.min.css"),localStorage.setItem("hljs-theme",e)),debug&&console.log("Highlighter is set to "+e)},modal:function(){debug&&console.log("Showing page settings"),$(".modal").remove();var e="",t="",o=" hidden",a=localStorage.getItem("hljs-theme");console.log("Selected theme: "+a),"dark"===a?e=" active":"light"===a?t=" active":o=" active",modal=Modal.header("page-settings","Page Settings"),modal+="<p>Highlighter theme:</p>",modal+='<div class="btn-group switch" role="group">',modal+='  <button type="button" class="btn btn-switch set-highlighter'+e+'">Dark</button>',modal+='  <button type="button" class="btn btn-switch set-highlighter'+t+'">Light</button>',modal+='  <button type="button" class="btn btn-switch custom-theme'+o+'">Custom</button>',modal+="</div>",modal+=Modal.footer("Close"),$("body").append(modal),$(".page-settings").modal("show")}},k,Keyboard={config:{input:$("#search-input")},init:function(){m=this.config,this.events()},events:function(){$(document).bind("keyup",function(e){Keyboard.focus()})},focus:function(){70===event.which&&(debug&&console.log("Focusing search"),$("#search-input").focus())}},h,Highlight={config:{custom:null,code:$("pre code"),theme:$(".hljs-theme"),body:$("body")},init:function(){h=this.config,this.default(),this.apply()},default:function(){if(!localStorage.getItem("hljs-theme")){localStorage.setItem("hljs-theme","dark")}},apply:function(){h.custom=localStorage.getItem("hljs-theme")||"dark","dark"===h.custom||"light"===h.custom?(debug&&console.log("Default "+h.custom+" theme"),h.body.removeClass("hljs-dark hljs-light").addClass("hljs-"+h.custom)):(debug&&console.log("Custom theme from "+h.custom),h.theme.attr("href",h.custom)),h.code.each(function(e,t){hljs.highlightBlock(t)})}};$(function(){$(".to-instapaper").click(function(e){e.preventDefault(),debug&&console.log("Saving to Instapaper");var t=encodeURIComponent(document.title),o=window.location.href;window.open("http://www.instapaper.com/hello2?url="+o+"&title="+t)})}),$(function(){var e,t;if(void 0===o)var o=$("body").data("search");$.ajax(o,{dataType:"json",success:function(t){e=t}}).done(function(){localStorage.setItem("search-index",JSON.stringify(e)),void 0!==$.urlParam("s")&&injectFrame(t=$.urlParam("s")),$("#search-input").attr("placeholder","Search").removeAttr("disabled").focus(),$("#search-input").keydown(function(){var o=$("#search-form");t=$("#search-input").val(),$("#search-input>ul>li.ui-state-focus").removeClass("ui-state-focus"),$(".ui-menu-item").filter(function(){return $.text([this])===t}).addClass("ui-state-focus"),inArrayS(t,e)>-1?o.attr("action","javascript:docsPage()"):o.attr("action","javascript:duckDuckGo()")}),$("#search-form").submit(function(e){if(""===$.trim($("#search-input").val()))return!1}),$("#search-input").hint({delay:0,source:e}),$(".ui-autocomplete").css({padding:"0"})})}),$(function(){Bookmarks.init(),Modal.init(),Preferences.init(),Keyboard.init(),Highlight.init()});